{"version":3,"file":"static/js/278.83483951.chunk.js","mappings":"iOA8FA,UA/Ee,SAAC,GAAgB,IAAD,EAAbA,EAAa,EAAbA,OAChB,GAAoCC,EAAAA,EAAAA,UAAS,IAA7C,eAAOC,EAAP,KAAmBC,EAAnB,KACA,GAAwCF,EAAAA,EAAAA,UAAS,GAAjD,eAAOG,EAAP,KAAqBC,EAArB,KACA,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACA,GAAoCP,EAAAA,EAAAA,UAAS,IAA7C,eAAOQ,EAAP,KAAmBC,EAAnB,KACA,GAA4BT,EAAAA,EAAAA,UAAS,WAArC,eAAOU,EAAP,KAAeC,EAAf,KAEMC,EAAK,UAAGN,EAAaO,IAAI,gBAApB,QAAgC,GACrCC,EAAOC,OAAOT,EAAaO,IAAI,UAAY,GAEjDG,EAAAA,EAAAA,YAAU,WACRP,EAAcG,GAEVA,IACFD,EAAU,WAEVM,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,WAGZC,EAAAA,EAAAA,YACeT,EAAOE,GACnBQ,MAAK,YAAiC,IAA9BC,EAA6B,EAA7BA,QAASC,EAAoB,EAApBA,cAChBtB,EAAcqB,GACdnB,EAAgBoB,GAChBb,EAAU,UACX,IACAc,OAAM,kBAAMd,EAAU,QAAhB,KAGG,KAAVC,IACFV,EAAc,IACdE,EAAgB,GAEnB,GAAE,CAACQ,EAAOE,EAAMH,IAiBjB,OACE,6BACE,SAAC,KAAD,CACEe,iBAlBmB,SAAAC,GACvBA,EAAEC,iBAEF,IAAQC,EAAUF,EAAEG,OAAOlB,MAAnBiB,MAEM,KAAVA,EAKJtB,EAAgB,CAAEK,MAAOiB,EAAOf,KAAM,IAJpCiB,IAAAA,OAAAA,QAAwB,2BAK3B,EAQKtB,cAAeA,EACfD,WAAYA,KAED,YAAXE,GAAmC,YAAXA,KACxB,SAAC,KAAD,CAAYsB,OAAQ/B,EAAYF,OAAQA,IAE9B,UAAXW,IACC,SAAC,KAAD,CACEuB,MAAK,wDAAmDrB,EAAnD,SAGG,YAAXF,IAAwB,SAAC,KAAD,IACb,YAAXA,GAAwBP,EAAe,KACtC,SAAC,KAAD,CACEA,aAAcA,EACd+B,YAAapB,EACbqB,QAtBe,SAAArB,GAAI,OAAIP,GAAgB,QAAEK,MAAOA,GAAUE,GAAvC,MA2B5B,C","sources":["pages/Movies/Movies.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport Notiflix from 'notiflix';\n\nimport {\n  MoviesList,\n  PagePagination,\n  SearchField,\n  NotFound,\n  Spinner,\n} from 'components';\n\nimport { movieApi } from 'services/api';\n\nconst Movies = ({ genres }) => {\n  const [moviesList, setMoviesList] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [queryInput, setQueryInput] = useState('');\n  const [status, setStatus] = useState('success');\n\n  const query = searchParams.get('query') ?? '';\n  const page = Number(searchParams.get('page')) || 1;\n\n  useEffect(() => {\n    setQueryInput(query);\n\n    if (query) {\n      setStatus('pending');\n\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      });\n\n      movieApi\n        .searchMovie(query, page)\n        .then(({ results, total_results }) => {\n          setMoviesList(results);\n          setTotalResults(total_results);\n          setStatus('success');\n        })\n        .catch(() => setStatus('error'));\n    }\n\n    if (query === '') {\n      setMoviesList([]);\n      setTotalResults(0);\n    }\n  }, [query, page, setStatus]);\n\n  const handleFormSubmit = e => {\n    e.preventDefault();\n\n    const { value } = e.target.query;\n\n    if (value === '') {\n      Notiflix.Notify.failure('Search field is empty!!!');\n      return;\n    }\n\n    setSearchParams({ query: value, page: 1 });\n  };\n\n  const setQueryString = page => setSearchParams({ query: query, ...page });\n\n  return (\n    <main>\n      <SearchField\n        handleFormSubmit={handleFormSubmit}\n        setQueryInput={setQueryInput}\n        queryInput={queryInput}\n      />\n      {(status === 'success' || status === 'pending') && (\n        <MoviesList movies={moviesList} genres={genres} />\n      )}\n      {status === 'error' && (\n        <NotFound\n          title={`Oops! We couldn't find any movie with title - ${query}...`}\n        />\n      )}\n      {status === 'pending' && <Spinner />}\n      {status === 'success' && totalResults > 20 && (\n        <PagePagination\n          totalResults={totalResults}\n          currentPage={page}\n          setPage={setQueryString}\n        />\n      )}\n    </main>\n  );\n};\n\nexport default Movies;\n"],"names":["genres","useState","moviesList","setMoviesList","totalResults","setTotalResults","useSearchParams","searchParams","setSearchParams","queryInput","setQueryInput","status","setStatus","query","get","page","Number","useEffect","window","scrollTo","top","behavior","movieApi","then","results","total_results","catch","handleFormSubmit","e","preventDefault","value","target","Notiflix","movies","title","currentPage","setPage"],"sourceRoot":""}